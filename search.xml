<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>mvn命令报没有配置jdk环境</title>
      <link href="/2024/06/06/mvn%E5%91%BD%E4%BB%A4%E6%8A%A5%E6%B2%A1%E6%9C%89%E9%85%8D%E7%BD%AEjdk%E7%8E%AF%E5%A2%83/"/>
      <url>/2024/06/06/mvn%E5%91%BD%E4%BB%A4%E6%8A%A5%E6%B2%A1%E6%9C%89%E9%85%8D%E7%BD%AEjdk%E7%8E%AF%E5%A2%83/</url>
      
        <content type="html"><![CDATA[<h1 id="mvn-命令报没有配置jdk环境"><a href="#mvn-命令报没有配置jdk环境" class="headerlink" title="mvn 命令报没有配置jdk环境"></a>mvn 命令报没有配置jdk环境</h1><p>jdk环境变量配置没问题，并且java -version 也正常显示。</p><p>执行mvn -v 报错误：</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/d/Program Files/maven/apache-maven-3.9.5/bin/mvn: line 93: cd: C:\Program Files\Java\jdk-19;: No such file or directory</span><br><span class="line">The JAVA_HOME environment variable is not defined correctly,</span><br><span class="line">this environment variable is needed to run this program.</span><br></pre></td></tr></tbody></table></figure><p><strong>解决方法：</strong></p><ol><li>命令行设置<em>JAVA_HOME</em></li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自己本机jdk安装目录（C:\Program Files\Java\jdk-19）</span></span><br><span class="line">setx JAVA_HOME <span class="string">"C:\Program Files\Java\jdk-19"</span></span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>更新<em>Path</em>变量</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//maven的安装目录（D:\Program Files\maven\apache-maven-3.9.5）</span></span><br><span class="line">setx PATH <span class="string">"%JAVA_HOME%\bin;D:\Program Files\maven\apache-maven-3.9.5\bin;%PATH%"</span></span><br></pre></td></tr></tbody></table></figure><ol start="3"><li><em>关闭并重新打开命令提示符</em>，然后运行以下命令验证配置：</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br><span class="line">mvn -version</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Spring Bean 生命周期</title>
      <link href="/2024/05/25/Spring-Bean-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/"/>
      <url>/2024/05/25/Spring-Bean-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
      
        <content type="html"><![CDATA[<h2 id="Spring-Bean-生命周期"><a href="#Spring-Bean-生命周期" class="headerlink" title="Spring Bean 生命周期"></a>Spring Bean 生命周期</h2><h3 id="bean的4个阶段"><a href="#bean的4个阶段" class="headerlink" title="bean的4个阶段"></a>bean的4个阶段</h3><ol><li>Bean的<strong>实例化</strong>阶段</li><li>Bean的<strong>设置属性</strong>阶段</li><li>Bean的<strong>初始化</strong>阶段</li><li>Bean的<strong>销毁</strong>阶段</li></ol><img src="/2024/05/25/Spring-Bean-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/shengmingzhouqi.jpeg" class="" title="生命周期-流程图"><h4 id="实例化Bean"><a href="#实例化Bean" class="headerlink" title="实例化Bean"></a>实例化Bean</h4><ol><li><p>Bean Definition Loading（bean定义加载）</p><p>Spring容器从配置文件或者注解中读取Bean定义信息，这些定义信息包括Bean的类名、作用范围（scope）、依赖关系（循环依赖问题）、初始化方法。</p></li><li><p>Bean Instantiation（Bean实例化）</p><p>Spring<strong>通过反射机制创建Bean实例</strong>，spring调用Bean的构造函数来实例化对象。</p></li></ol><h4 id="设置属性"><a href="#设置属性" class="headerlink" title="设置属性"></a>设置属性</h4><ol><li><p>Spring容器在实例化Bean之后，会进行依赖注入，将Bean所依赖的其他Bean注入到该Bean中，此过程使用setter方法或者反射直接访问字段;</p><ul><li><p>bean依赖注入3种方式</p></li><li><p>@Autowired, @Resource, @Qualifier, @Bean 几个自动注入注解区别</p></li></ul></li></ol><h4 id="实现Aware类接口"><a href="#实现Aware类接口" class="headerlink" title="实现Aware类接口"></a>实现Aware类接口</h4><p>在<code>postProcessBeforeInitialization</code>方法执行前，会执行很多Aware类型的接口，这种接口的作用是：<strong>允许bean获取到Spring容器的特定资源或信息</strong>。由Spring容器自动调用相应的方法，<strong>将相关资源或信息注入到bean中</strong>。</p><p>常见Aware接口：</p><ol><li><code>BeanNameAware</code>：<ul><li>方法：<code>setBeanName(String name)</code></li><li>作用：将当前bean的名称注入到bean中。</li><li>执行时机：bean实例化之后，但在依赖注入之前。</li></ul></li><li><code>BeanFactoryAware</code>：<ul><li>方法：<code>setBeanFactory(BeanFactory beanFactory)</code></li><li>作用：将<code>BeanFactory</code>注入到bean中。</li><li>执行时机：bean实例化之后，但在依赖注入之前。</li></ul></li><li><code>ApplicationContextAware</code>：<ul><li>方法：<code>setApplicationContext(ApplicationContext applicationContext)</code></li><li>作用：将<code>ApplicationContext</code>注入到bean中。</li><li>执行时机：在<code>BeanFactoryAware</code>之后调用。</li></ul></li><li><code>ResourceLoaderAware</code>：<ul><li>方法：<code>setResourceLoader(ResourceLoader resourceLoader)</code></li><li>作用：将<code>ResourceLoader</code>注入到bean中，允许bean加载资源文件。</li><li>执行时机：bean实例化之后，但在依赖注入之前。</li></ul></li><li><code>EnvironmentAware</code>：<ul><li>方法：<code>setEnvironment(Environment environment)</code></li><li>作用：将<code>Environment</code>注入到bean中，允许bean访问环境信息。</li><li>执行时机：bean实例化之后，但在依赖注入之前。</li></ul></li></ol><h4 id="BeanPostProcessor-初始化前后置处理"><a href="#BeanPostProcessor-初始化前后置处理" class="headerlink" title="BeanPostProcessor(初始化前后置处理)"></a>BeanPostProcessor(初始化前后置处理)</h4><ol><li><p>解释：</p><p>对新创建的bean实例进行自定义修改，通过实现该接口，可以<strong>在初始化bean前后进行额外的处理</strong>。</p></li><li><p>实现方法</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Object <span class="title function_">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException;</span><br><span class="line">Object <span class="title function_">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException;</span><br></pre></td></tr></tbody></table></figure><ul><li><code>postProcessBeforeInitialization</code>: 在bean初始化之前调用，可以对bean进行处理，然后放回处理后的bean实例。</li><li><code>postProcessAfterInitialization</code>: 在bean初始化之后调用，可以对bean进行后续处理，然后返回处理后的bean实例。</li></ul></li><li><p>使用场景</p><ul><li>日志记录：可以在bean初始化前后记录日志，方便调试和监控；</li><li>属性检查或设置：在bean初始化之前检查或设置某些属性；</li><li>代理对象创建：额可以在bean初始化之后创建代理对象，用于AOP场景；</li></ul></li></ol><h4 id="Bean初始化"><a href="#Bean初始化" class="headerlink" title="Bean初始化"></a>Bean初始化</h4><ul><li><p>使用@PostConstruct注解， 执行顺序 &gt; 下面两种方式</p></li><li><p>继承<code>InitializingBean</code>实现afterPropertiesSet()方法</p></li><li><p>在@Bean注解上指定初始化方法（等同于使用spring中xml方法指定init-method属性的方法，但是现在谁还用spring xml啊）</p></li></ul><h4 id="Bean销毁"><a href="#Bean销毁" class="headerlink" title="Bean销毁"></a>Bean销毁</h4><ul><li><code>@PreDestory</code> 注解，用于在Spring Bean被销毁之前执行清理逻辑（释放资源，关闭连接等），可以与 <code>@PostConstruct</code> 注解结合使用，确保在 Bean 初始化和销毁时执行相应的逻辑。</li><li>实现<code>DisposableBean</code>接口destroy()方法</li><li>在@Bean注解上destroyMethod属性指定销毁方法</li></ul><h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBean</span> <span class="keyword">implements</span> <span class="title class_">BeanNameAware</span>, ApplicationContextAware, InitializingBean {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String beanName;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MyBean</span><span class="params">()</span> {</span><br><span class="line">        log.info(<span class="string">"1.调用构造方法实例化"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBeanName</span><span class="params">(String name)</span> {</span><br><span class="line">        <span class="built_in">this</span>.beanName = name;</span><br><span class="line">        log.info(<span class="string">"2.实现BeanNameAware接口：{}"</span>, name);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setApplicationContext</span><span class="params">(ApplicationContext applicationContext)</span> <span class="keyword">throws</span> BeansException {</span><br><span class="line">        log.info(<span class="string">"3.实现ApplicationContextAware接口：{}"</span>, applicationContext);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterPropertiesSet</span><span class="params">()</span> {</span><br><span class="line">        log.info(<span class="string">"6.使用继承InitializingBean初始化：{}"</span>, beanName);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span>{</span><br><span class="line">        log.info(<span class="string">"7.使用init-method初始化：{}"</span>, beanName);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init1</span><span class="params">()</span>{</span><br><span class="line">        log.info(<span class="string">"5.使用@PostConstruct初始化：{}"</span>, beanName);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@PreDestroy</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroyAnno</span><span class="params">()</span>{</span><br><span class="line">        log.info(<span class="string">"9.@PreDestroy销毁bean：{}"</span>, beanName);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span>{</span><br><span class="line">        log.info(<span class="string">"10.使用destroy-method配置销毁bean：{}"</span>, beanName);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanPostProcessorImpl</span> <span class="keyword">implements</span> <span class="title class_">BeanPostProcessor</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessBeforeInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException {</span><br><span class="line">        log.info(<span class="string">"4.实例：{} 初始化前"</span>, beanName);</span><br><span class="line">        <span class="keyword">return</span> bean;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">postProcessAfterInitialization</span><span class="params">(Object bean, String beanName)</span> <span class="keyword">throws</span> BeansException {</span><br><span class="line">        log.info(<span class="string">"8.实例：{} 初始化后"</span>, beanName);</span><br><span class="line">        <span class="keyword">return</span> BeanPostProcessor.<span class="built_in">super</span>.postProcessAfterInitialization(bean, beanName);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BeanConfig</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(initMethod = "init", destroyMethod = "destroy")</span></span><br><span class="line">    <span class="keyword">public</span> MyBean <span class="title function_">myBean</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">MyBean</span>();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DestroyService</span> <span class="keyword">implements</span> <span class="title class_">DisposableBean</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> {</span><br><span class="line">        log.info(<span class="string">"11.实现DisposableBean接口执行销毁方法"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2024</span>-<span class="number">05</span>-24T18:<span class="number">18</span>:<span class="number">58.548</span>+08:<span class="number">00</span>  INFO <span class="number">18372</span> --- [springs] [           main] com.leejie.springBean.MyBean             : <span class="number">1.</span>调用构造方法实例化</span><br><span class="line"><span class="number">2024</span>-<span class="number">05</span>-24T18:<span class="number">18</span>:<span class="number">58.550</span>+08:<span class="number">00</span>  INFO <span class="number">18372</span> --- [springs] [           main] com.leejie.springBean.MyBean             : <span class="number">2.</span>实现BeanNameAware接口：myBean</span><br><span class="line"><span class="number">2024</span>-<span class="number">05</span>-24T18:<span class="number">18</span>:<span class="number">58.550</span>+08:<span class="number">00</span>  INFO <span class="number">18372</span> --- [springs] [           main] com.leejie.springBean.MyBean             : <span class="number">3.</span>实现ApplicationContextAware接口：org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext@<span class="number">7e276594</span>, started on Fri May <span class="number">24</span> <span class="number">18</span>:<span class="number">18</span>:<span class="number">57</span> CST <span class="number">2024</span></span><br><span class="line"><span class="number">2024</span>-<span class="number">05</span>-24T18:<span class="number">18</span>:<span class="number">58.550</span>+08:<span class="number">00</span>  INFO <span class="number">18372</span> --- [springs] [           main] c.l.springBean.BeanPostProcessorImpl     : <span class="number">4.</span>实例：myBean 初始化前</span><br><span class="line"><span class="number">2024</span>-<span class="number">05</span>-24T18:<span class="number">18</span>:<span class="number">58.551</span>+08:<span class="number">00</span>  INFO <span class="number">18372</span> --- [springs] [           main] com.leejie.springBean.MyBean             : <span class="number">5.</span>使用<span class="meta">@PostConstruct</span>初始化：myBean</span><br><span class="line"><span class="number">2024</span>-<span class="number">05</span>-24T18:<span class="number">18</span>:<span class="number">58.551</span>+08:<span class="number">00</span>  INFO <span class="number">18372</span> --- [springs] [           main] com.leejie.springBean.MyBean             : <span class="number">6.</span>使用继承InitializingBean初始化：myBean</span><br><span class="line"><span class="number">2024</span>-<span class="number">05</span>-24T18:<span class="number">18</span>:<span class="number">58.552</span>+08:<span class="number">00</span>  INFO <span class="number">18372</span> --- [springs] [           main] com.leejie.springBean.MyBean             : <span class="number">7.</span>使用init-method初始化：myBean</span><br><span class="line"><span class="number">2024</span>-<span class="number">05</span>-24T18:<span class="number">18</span>:<span class="number">58.552</span>+08:<span class="number">00</span>  INFO <span class="number">18372</span> --- [springs] [           main] c.l.springBean.BeanPostProcessorImpl     : <span class="number">8.</span>实例：myBean 初始化后</span><br><span class="line"><span class="number">2024</span>-<span class="number">05</span>-24T18:<span class="number">23</span>:<span class="number">15.637</span>+08:<span class="number">00</span>  INFO <span class="number">18372</span> --- [springs] [ionShutdownHook] com.leejie.springBean.MyBean             : <span class="number">9.</span><span class="meta">@PreDestroy</span>销毁bean：myBean</span><br><span class="line"><span class="number">2024</span>-<span class="number">05</span>-24T18:<span class="number">23</span>:<span class="number">15.638</span>+08:<span class="number">00</span>  INFO <span class="number">18372</span> --- [springs] [ionShutdownHook] com.leejie.springBean.MyBean             : <span class="number">10.</span>使用destroy-method配置销毁bean：myBean</span><br><span class="line"><span class="number">2024</span>-<span class="number">05</span>-24T18:<span class="number">23</span>:<span class="number">15.638</span>+08:<span class="number">00</span>  INFO <span class="number">18372</span> --- [springs] [ionShutdownHook] com.leejie.springBean.DestroyService     : <span class="number">11.</span>实现DisposableBean接口执行销毁方法</span><br></pre></td></tr></tbody></table></figure>]]></content>
      
      
      <categories>
          
          <category> 后端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> spring </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
